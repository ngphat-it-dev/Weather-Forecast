<script language="javascript">
    function myFunction() {
      
      const location = document.getElementById("location").value;
      var myHeaders = new Headers();
      myHeaders.append("Content-Type", "application/x-www-form-urlencoded");

      var urlencoded = new URLSearchParams();
      urlencoded.append("token", "az02n1249clasfhxaroqw");
      urlencoded.append("time", "now");
      urlencoded.append("type", "all");
      urlencoded.append("location", location);

      var requestOptions = {
        method: 'POST',
        headers: myHeaders,
        body: urlencoded,
        redirect: 'follow'
};

fetch("http://localhost:3000", requestOptions)
  .then(response => response.text())
  .then(result =>{
     const fRe = JSON.parse(result);
     //console.log(result.data.location.name)
     document.getElementById('name').innerHTML = fRe.data.location.name ;
     document.getElementById('day').innerHTML = fRe.data.location.localtime;
     document.getElementById('status').innerHTML = fRe.data.current.condition.text ;
     document.getElementById('temp').innerHTML = fRe.data.current.temp_c + `&#176;`;
     
     document.getElementById('cloudy').innerHTML = fRe.data.current.cloud + "%";
     document.getElementById('hum').innerHTML = fRe.data.current.humidity +"%";
     document.getElementById('win').innerHTML = fRe.data.current.wind_dir ;
     document.getElementById('rai').innerHTML = fRe.data.location.localtime_epoch ;
     document.getElementById('tempf').innerHTML = fRe.data.current.temp_f +`&#176;` +"F";
     document.getElementById('tempc').innerHTML = fRe.data.current.temp_c +`&#176;`+ "C";

     document.getElementById("icon").src=fRe.data.current.condition.icon;
     })
  .catch(error => console.log('error', error));
}
</script>

<div class="container-fluid px-1 px-sm-3 py-5 mx-auto">
  <div class="row d-flex justify-content-center">
    <div class="row card0">
      <div class="card1 col-lg-8 col-md-7">
        <div class="text-center">
          <img class="image mt-5" id="icon" src="https://i.imgur.com/M8VyA2h.png" />
        </div>
        <div class="row px-3 mt-3 mb-3">
          <h1 class="large-font mr-3" id="temp">26&#176;</h1>
          <div class="d-flex flex-column mr-3">
            <h2 class="mt-3 mb-0" id="name">Can Tho</h2>
            <small id="day">10:36 - Tuesday, 22 Oct '19</small>
          </div>
          <div class="d-flex flex-column text-center">
            <h3 class="fa fa-sun-o mt-4"></h3>
            <small id="status">Sunny</small>
          </div>
        </div>
      </div>
      <form action="http://localhost:3000/" method="POST" id="form" class="submit"></form>
        <div class="card2 col-lg-4 col-md-5">
          <div class="row px-3">
            <input type="text" name="location" placeholder="Another location" class="mb-5" id="location" onchange="myFunction()" />
            <div class="fa fa-search mb-5 mr-0 text-center"></div>
          </div>
        </form>
        <div class="mr-5">
          <p class="light-text suggestion">Birmingham</p>
          <p class="light-text suggestion">Manchester</p>
          <p class="light-text suggestion">New York</p>
          <p class="light-text suggestion">California</p>
          <p class="light-text suggestion">Ho-Chi-Minh</p>
          <p class="light-text suggestion">Paris</p>
          <p class="light-text suggestion">Can-Tho</p>

          <div class="line my-5"></div>

          <p>Weather Details</p>
          <div class="row px-3">
            <p class="light-text" >Cloudy</p>
            <p class="ml-auto" id="cloudy" >12%</p>
          </div>
           <div class="row px-3">
            <p class="light-text">Fahrenheit</p>
            <p class="ml-auto" id="tempf">12%</p>
          </div>
           <div class="row px-3">
            <p class="light-text">Celsius</p>
            <p class="ml-auto" id="tempc">12%</p>
          </div>
          <div class="row px-3">
            <p class="light-text">Humidity</p>
            <p class="ml-auto" id="hum">78%</p>
          </div>
          <div class="row px-3">
            <p class="light-text">Wind direction</p>
            <p class="ml-auto" id="win">1km/h</p>
          </div>
          <div class="row px-3">
            <p class="light-text">Current Epoch Time</p>
            <p class="ml-auto" id="rai">0mm</p>
          </div>

          <div class="line mt-3"></div>
        </div>
      </div>
    </div>
  </div>
</div>